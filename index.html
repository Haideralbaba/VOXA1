<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VOXA â€” Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ</title>

  <!-- Ø®Ø· ÙˆØ£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet">

  <style>
    :root {
      /* === Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù„ÙˆØ§Ù†: Ø£Ø³ÙˆØ¯ ÙˆØ°Ù‡Ø¨ÙŠ === */
      --bg1: #0a0a0a;
      --bg2: #111111;
      --txt: #f0e6d2;
      --muted: #a09078;
      --primary: #ffd700;
      --secondary: #c5b358;
      --accent: #e6c300;
      --card: rgba(255, 215, 0, .05);
      --border: rgba(255, 215, 0, .15);
      --shadow: 0 10px 30px rgba(0, 0, 0, .5);
      --ring: 0 0 0 4px rgba(255, 215, 0, .2);
      --success: #22c55e;
      --error: #ef4444;
      --radius: 16px;
    }

    * {
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      margin: 0;
      font-family: "Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans Arabic", sans-serif;
      color: var(--txt);
      background-color: var(--bg1);
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* === Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¬Ø³ÙŠÙ…Ø§Øª Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© === */
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
    }

    a {
      color: #ffd700;
      text-decoration: none;
    }

    a:focus-visible, button:focus-visible, input:focus-visible {
      outline: none;
      box-shadow: var(--ring);
    }

    /* Ø­Ø§ÙˆÙŠØ© Ø¹Ø§Ù…Ø© */
    .container {
      width: min(1100px, 92%);
      margin-inline: auto;
      padding: clamp(18px, 4vw, 40px);
      position: relative;
      z-index: 2;
    }

    /* === ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± === */
    .reveal-section {
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease-out, transform 0.8s ease-out;
    }

    .reveal-section.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ */
    .topbar {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(14px) saturate(120%);
      background: rgba(10, 10, 10, 0.6);
      border-bottom: 1px solid var(--border);
    }

    .topbar .inner {
      width: min(1100px, 92%);
      margin: auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 20px;
      padding: 10px 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 800;
      letter-spacing: .4px;
    }

    .brand i {
      color: var(--primary);
      filter: drop-shadow(0 0 8px rgba(255, 215, 0, .4));
    }

    .nav {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .nav a {
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid transparent;
      transition: background .2s, border-color .2s;
    }

    .nav a:hover {
      background: var(--card);
      border-color: var(--border);
    }
    
    /* Ø­Ù‚Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ */
    .api-key-input-container {
        display: flex;
        align-items: center;
        gap: 8px;
        flex-grow: 1;
        max-width: 300px;
    }
    
    .api-key-input-container input {
        width: 100%;
        padding: 6px 10px;
        border-radius: 8px;
        border: 1px solid var(--border);
        background: rgba(255, 215, 0, .04);
        color: var(--txt);
        outline: none;
        font-size: 13px;
    }
    
    .api-key-input-container button {
        padding: 6px 12px;
        border: none;
        border-radius: 8px;
        background: var(--primary);
        color: var(--bg1);
        font-weight: 700;
        cursor: pointer;
        transition: opacity .2s;
    }

    /* Ù‚Ø³Ù… Ø§Ù„ØªØ±Ø­ÙŠØ¨ */
    header.hero {
      min-height: 100vh;
      display: grid;
      place-items: center;
      text-align: center;
    }

    .hero-box {
      width: min(820px, 100%);
      margin: auto;
      padding: clamp(18px, 3vw, 30px);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255, 215, 0, .04), transparent);
      border: 1px solid var(--border);
      backdrop-filter: blur(8px) saturate(120%);
      box-shadow: var(--shadow);
      position: relative;
    }

    .logo {
      width: 52px;
      height: 52px;
      border-radius: 14px;
      margin: 0 auto 10px;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at 30% 30%, var(--primary), var(--secondary));
      color: #1a1100;
      font-weight: 900;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, .35), 0 8px 18px rgba(255, 215, 0, .25);
    }

    h1 {
      margin: .2rem 0 .3rem;
      font-size: clamp(26px, 6vw, 48px);
      line-height: 1.1;
      font-weight: 800;
      color: #fff;
    }

    .subtitle {
      color: var(--muted);
      font-size: clamp(15px, 2.2vw, 20px);
      line-height: 1.9;
      margin: 0 auto 18px;
      max-width: 65ch;
    }

    .cta-row {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    /* Ø£Ø²Ø±Ø§Ø± */
    .btn {
      position: relative;
      overflow: hidden;
      appearance: none;
      border: none;
      cursor: pointer;
      padding: 14px 20px;
      border-radius: 14px;
      font-weight: 800;
      letter-spacing: .2px;
      color: #141000;
      background: linear-gradient(135deg, var(--secondary), var(--primary));
      background-size: 100% 100%;
      transition: transform .15s ease, box-shadow .25s ease, filter .2s ease;
      box-shadow: 0 10px 22px rgba(255, 215, 0, .2), inset 0 1px 0 rgba(255, 255, 255, .35);
    }

    .btn:hover:not(:disabled) {
      transform: translateY(-2px);
      filter: brightness(1.1);
    }

    .btn:active:not(:disabled) {
      transform: translateY(0);
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      filter: grayscale(0.5);
    }

    .btn i {
      margin-inline-start: 8px;
      color: #141000;
    }

    .btn.secondary {
      color: var(--txt);
      background: transparent;
      border: 1px solid var(--border);
      box-shadow: none;
    }

    .btn.secondary:hover:not(:disabled) {
      background: var(--card);
      filter: brightness(1);
    }

    .ripple {
      position: absolute;
      border-radius: 50%;
      transform: scale(0);
      pointer-events: none;
      background: rgba(255, 215, 0, .5);
      animation: ripple .6s ease-out forwards;
    }

    @keyframes ripple {
      to {
        transform: scale(8);
        opacity: 0;
      }
    }

    /* Ù‚Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø§Øª */
    section.services {
      padding-block: clamp(28px, 6vw, 70px);
    }

    .grid {
      display: grid;
      gap: clamp(12px, 2vw, 18px);
    }

    @media (min-width: 700px) {
      .grid {
        grid-template-columns: repeat(12, 1fr);
      }
    }

    .card {
      grid-column: span 12;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 16px;
      box-shadow: var(--shadow);
      transition: transform .2s ease, border-color .2s ease, background .2s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      border-color: rgba(255, 215, 0, .3);
      background: rgba(255, 215, 0, .08);
    }

    .card .icon {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      display: grid;
      place-items: center;
      margin-bottom: 8px;
      background: radial-gradient(circle at 30% 30%, var(--primary), var(--secondary));
      color: #1a1100;
      font-size: 18px;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, .4), 0 6px 16px rgba(255, 215, 0, .3);
    }

    .card h3 {
      margin: .2rem 0 .3rem;
      color: #fff;
    }

    .card p {
      margin: 0;
      color: var(--muted);
      line-height: 1.8;
    }

    @media (min-width: 700px) {
      .span-3 {
        grid-column: span 3;
      }

      .span-6 {
        grid-column: span 6;
      }
    }

    /* CTA */
    .cta {
      margin-block: clamp(26px, 6vw, 60px);
      padding: clamp(18px, 3vw, 24px);
      border-radius: var(--radius);
      background: linear-gradient(135deg, rgba(255, 215, 0, .12), rgba(255, 215, 0, .05));
      border: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
    }

    .cta h2 {
      margin: .2rem 0;
      font-size: clamp(20px, 4.5vw, 28px);
    }

    .cta p {
      margin: 0;
      color: var(--muted);
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 18px;
      right: 18px;
      z-index: 50;
      background: rgba(17, 17, 17, .85);
      color: #f0e6d2;
      border: 1px solid var(--border);
      padding: 10px 14px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      opacity: 0;
      transform: translateY(8px);
      transition: opacity .25s ease, transform .25s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      pointer-events: none;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .toast i {
      color: var(--success);
    }
    
    .toast.error i {
      color: var(--error);
    }

    /* Ù…Ø¤Ø´Ù‘Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© */
    .typing {
        display: flex;
        align-items: center;
        gap: 4px;
        padding-top: 2px;
    }

    .typing .dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      display: block;
      background: var(--secondary);
      opacity: .6;
      animation: blink 1.2s infinite ease-in-out;
    }

    .typing .dot:nth-child(2) {
      animation-delay: .2s;
    }

    .typing .dot:nth-child(3) {
      animation-delay: .4s;
    }

    @keyframes blink {
      0%, 80%, 100% {
        transform: translateY(0);
        opacity: .4;
      }

      40% {
        transform: translateY(-3px);
        opacity: 1;
      }
    }

    /* Chat */
    .chat {
      position: fixed;
      left: 24px;
      bottom: 24px;
      width: min(380px, 92vw);
      height: min(560px, 70vh);
      display: flex;
      flex-direction: column;
      border-radius: 18px;
      background: rgba(10, 10, 10, 0.6);
      border: 1px solid var(--border);
      backdrop-filter: blur(14px) saturate(120%);
      box-shadow: var(--shadow);
      overflow: hidden;
      z-index: 60;
      transform: translateY(24px) scale(.98);
      opacity: 0;
      pointer-events: none;
      transition: transform .45s cubic-bezier(.2, .8, .2, 1), opacity .45s ease;
    }

    .chat.is-open {
      transform: translateY(0) scale(1);
      opacity: 1;
      pointer-events: auto;
    }

    .chat-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 14px;
      background: rgba(255, 215, 0, .05);
      border-bottom: 1px solid var(--border);
    }

    .chat-header .user {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .chat-actions button {
        background: none;
        border: none;
        color: var(--muted);
        cursor: pointer;
        font-size: 20px;
        padding: 4px;
        border-radius: 6px;
        transition: color .2s;
    }
    
    .chat-actions button:hover {
        color: var(--txt);
    }


    .avatar {
      width: 36px;
      height: 36px;
      border-radius: 10px;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at 30% 30%, var(--primary), var(--secondary));
      color: #1a1100;
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, .4), 0 6px 16px rgba(255, 215, 0, .3);
      position: relative;
      isolation: isolate;
    }

    .title-wrap .name {
      font-weight: 800;
      font-size: 14px;
      letter-spacing: .2px;
      color: #fff;
    }

    .title-wrap .sub {
      font-size: 12px;
      color: var(--muted);
    }

    .chat-body {
      flex: 1;
      overflow-y: auto;
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      scroll-behavior: smooth;
    }

    .msg {
      max-width: 85%;
      padding: 10px 12px;
      border-radius: 14px;
      font-size: 14px;
      line-height: 1.6;
      background: var(--card);
      border: 1px solid var(--border);
      box-shadow: 0 4px 12px rgba(0, 0, 0, .15);
      position: relative;
      animation: pop .25s ease-out both;
      backdrop-filter: blur(8px) saturate(140%);
      white-space: pre-wrap; /* Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø±ØªØ¬Ø¹ */
    }

    @keyframes pop {
      from {
        transform: translateY(6px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .msg.bot {
      align-self: flex-start;
      border-top-left-radius: 6px;
    }

    .msg.user {
      align-self: flex-end;
      border-top-right-radius: 6px;
      background: linear-gradient(180deg, rgba(255, 215, 0, .18), rgba(255, 215, 0, .1));
      border-color: rgba(255, 215, 0, .25);
    }

    .chat-input {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      border-top: 1px solid var(--border);
      background: rgba(0, 0, 0, .1);
    }

    .chat-input input {
      flex: 1;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255, 215, 0, .04);
      color: var(--txt);
      outline: none;
      transition: border-color .2s ease, box-shadow .2s ease;
    }

    .chat-input input:focus {
      border-color: rgba(255, 215, 0, .4);
      box-shadow: var(--ring);
    }

    .send {
      width: 46px;
      height: 46px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      display: grid;
      place-items: center;
      background: linear-gradient(135deg, var(--accent), var(--secondary));
      color: #141000;
      box-shadow: 0 8px 18px rgba(255, 215, 0, .25);
      transition: transform .15s ease, filter .25s ease;
    }

    .send:hover:not(:disabled) {
      transform: translateY(-1px);
      filter: brightness(1.1);
    }
    
    .send:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        animation: none !important;
        transition: none !important;
      }

      .chat {
        transition: none;
      }

      .reveal-section {
        opacity: 1;
        transform: none;
      }
    }
  </style>

  <!-- *** ØªØ¹Ø¯ÙŠÙ„: Ø¥Ø¶Ø§ÙØ© ÙƒÙˆØ¯ Ø§Ø­ØªÙŠØ§Ø·ÙŠ ÙÙŠ Ø­Ø§Ù„ Ø¹Ø¯Ù… Ø¹Ù…Ù„ Ø§Ù„Ø¬Ø§ÙØ§Ø³ÙƒØ±Ø¨Øª *** -->
  <noscript>
    <style>
      .reveal-section {
        opacity: 1;
        transform: none;
      }
    </style>
  </noscript>
</head>
<body>

  <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© -->
  <div id="particles-js"></div>

  <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
  <div class="topbar">
    <div class="inner">
      <div class="brand"><i class="fa-solid fa-wand-magic-sparkles"></i> VOXA</div>
      
      <!-- Ø­Ù‚Ù„ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ API -->
      <div class="api-key-input-container">
        <input type="password" id="api-key-input" placeholder="Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Gemini API" autocomplete="off" aria-label="Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Gemini API">
        <button id="set-key-btn">Ø­ÙØ¸</button>
      </div>

      <nav class="nav">
        <a href="#hero">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="#services">Ø®Ø¯Ù…Ø§ØªÙ†Ø§</a>
        <a href="#" id="nav-open-chat" aria-controls="chat" aria-expanded="false">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</a>
      </nav>
    </div>
  </div>

  <header id="hero" class="hero container reveal-section">
    <div class="hero-box">
      <div class="logo" aria-hidden="true">V</div>
      <h1>Ù…Ø±Ø­Ø¨Ø§Ù‹ ğŸ‘‹ Ø£Ù†Ø§ VOXAØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ</h1>
      <p class="subtitle">
        Ø¬Ø§Ù‡Ø² Ù„ØªØ­ÙˆÙŠÙ„ Ø£ÙÙƒØ§Ø±Ùƒ Ø¥Ù„Ù‰ ØªØµÙ…ÙŠÙ…Ø§Øª Ù…ÙØ¨Ù‡Ø±Ø© â€” Ù…Ù† Ø§Ù„Ø´Ø¹Ø§Ø± ÙˆØ§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø¨ØµØ±ÙŠØ© Ø¥Ù„Ù‰ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„.
      </p>
      <div class="cta-row">
        <button class="btn" id="primary-cta">Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¢Ù† <i class="fa-solid fa-comments"></i></button>
        <button class="btn secondary" id="more-btn">ØªØ¹Ø±Ù‘Ù Ø£ÙƒØ«Ø± <i class="fa-solid fa-circle-info"></i></button>
      </div>
    </div>
  </header>

  <section id="services" class="services container reveal-section">
    <div class="grid">
      <article class="card span-3">
        <div class="icon"><i class="fa-solid fa-pen-nib"></i></div>
        <h3>ØªØµÙ…ÙŠÙ… Ù„ÙˆØ¬Ùˆ Ø§Ø­ØªØ±Ø§ÙÙŠ</h3>
        <p>Ø´Ø¹Ø§Ø± Ù…ØªÙ‚Ù† ÙŠØ¹ÙƒØ³ Ø´Ø®ØµÙŠÙ‘Ø© Ø¹Ù„Ø§Ù…ØªÙƒ ÙˆÙŠÙØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¨Ø³Ø§Ø·Ø© Ù‚ÙˆÙŠØ© ÙˆØ³Ù‡ÙˆÙ„Ø© ØªØ°ÙƒÙ‘Ø±.</p>
      </article>
      <article class="card span-3">
        <div class="icon"><i class="fa-solid fa-bullhorn"></i></div>
        <h3>Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ø³ÙˆØ´ÙŠØ§Ù„</h3>
        <p>ØªØµØ§Ù…ÙŠÙ… Ø¬Ø°Ù‘Ø§Ø¨Ø© Ù„Ø­Ù…Ù„Ø§ØªÙƒ Ù…Ø¹ ØµÙŠØ§ØºØ§Øª Ø°ÙƒÙŠÙ‘Ø© ØªÙØ¶Ø§Ø¹Ù Ø§Ù„ØªÙØ§Ø¹Ù„ ÙˆØ§Ù„Ù†ØªØ§Ø¦Ø¬.</p>
      </article>
      <article class="card span-3">
        <div class="icon"><i class="fa-solid fa-palette"></i></div>
        <h3>Ù‡ÙˆÙŠØ© Ø¨ØµØ±ÙŠØ© ÙƒØ§Ù…Ù„Ø©</h3>
        <p>Ù…Ù†Ø¸ÙˆÙ…Ø© Ù…ØªÙƒØ§Ù…Ù„Ø© Ù„Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„Ø®Ø·ÙˆØ· ÙˆØ§Ù„Ø¯Ù„Ø§Ø¦Ù„ Ù„ØªØ¬Ø±Ø¨Ø© Ù…ØªÙ‘Ø³Ù‚Ø© Ø£ÙŠÙ†Ù…Ø§ Ø¸Ù‡Ø±Øª.</p>
      </article>
      <article class="card span-3">
        <div class="icon"><i class="fa-solid fa-layer-group"></i></div>
        <h3>Ø®Ø¯Ù…Ø§Øª ØªØµÙ…ÙŠÙ… Ø£Ø®Ø±Ù‰</h3>
        <p>Ø¨Ø±ÙˆÙØ§ÙŠÙ„ Ø´Ø±ÙƒØ©ØŒ Ù‚ÙˆØ§Ù„Ø¨ Ø¹Ø±ÙˆØ¶ØŒ Ø¨Ù†Ø±Ø§Øª Ù…ÙˆØ§Ù‚Ø¹ØŒ ÙˆØ§Ù„Ù…Ø²ÙŠØ¯ â€” ÙƒÙ„Ù‘Ù‡ Ø¨Ø£Ø³Ù„ÙˆØ¨ VOXA Ø§Ù„Ø£Ù†ÙŠÙ‚.</p>
      </article>
    </div>
  </section>

  <section id="cta-section" class="container reveal-section">
    <div class="cta">
      <div>
        <h2>Ø¬Ø§Ù‡Ø² Ù†Ø¨Ø¯Ø£ØŸ</h2>
        <p>Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± ÙˆØ§Ø¨Ø¯Ø£ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¹ VOXA ÙÙˆØ±Ø§Ù‹.</p>
      </div>
      <button class="btn" id="secondary-cta">Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¢Ù† <i class="fa-solid fa-bolt"></i></button>
    </div>
  </section>

  <!-- Toast (Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª) -->
  <div id="toast" class="toast" role="status" aria-live="polite">
    <i class="fa-solid fa-check-circle"></i>
    <span>ØªÙ… Ø§Ù„Ø¶ØºØ· Ø¨Ù†Ø¬Ø§Ø­</span>
  </div>

  <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
  <section class="chat" id="chat" role="dialog" aria-modal="true" aria-label="Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©" aria-hidden="true">
    <div class="chat-header">
      <div class="user">
        <div class="avatar"><i class="fa-solid fa-robot"></i></div>
        <div class="title-wrap">
          <span class="name">VOXA</span>
          <span class="sub" id="chat-status">Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù† â€¢ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ</span>
        </div>
      </div>
      <div class="chat-actions">
        <button id="minimize" title="Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©" aria-label="Ø¥ØºÙ„Ø§Ù‚"><i class="fa-solid fa-xmark"></i></button>
      </div>
    </div>
    <div class="chat-body" id="chat-body" aria-live="polite" aria-atomic="false">
      <!-- Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø£ÙˆÙ„ÙŠØ© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
      
      <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© (ÙŠØ¸Ù‡Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©) -->
      <div class="msg bot" id="typing-wrap" style="display:none">
        <span class="typing"><span class="dot"></span><span class="dot"></span><span class="dot"></span></span>
      </div>
    </div>
    <form class="chat-input" id="chat-form">
      <input id="chat-input" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." autocomplete="off" aria-label="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©">
      <button class="send" id="send-button" type="submit" title="Ø¥Ø±Ø³Ø§Ù„" aria-label="Ø¥Ø±Ø³Ø§Ù„"><i class="fa-solid fa-paper-plane"></i></button>
    </form>
  </section>

  <!-- Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© -->
  <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.12.0/tsparticles.bundle.min.js"></script>

  <script>
    // 1. Ø¥Ø¹Ø¯Ø§Ø¯ ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
    try {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, {
        rootMargin: '0px 0px -50px 0px'
      });

      document.querySelectorAll('.reveal-section').forEach(section => observer.observe(section));
    } catch (e) {
      console.error("Error setting up IntersectionObserver:", e);
      document.querySelectorAll('.reveal-section').forEach(s => {
        s.style.opacity = '1';
        s.style.transform = 'none';
      });
    }
// 2. Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
    try {
      if (window.tsParticles) {
        tsParticles.load("particles-js", {
          background: { color: { value: "#0a0a0a" } },
          fpsLimit: 60,
          particles: {
            number: { value: 60, density: { enable: true, value_area: 800 } },
            color: { value: "#ffd700" },
            shape: { type: "circle" },
            opacity: { value: 0.5, random: true, anim: { enable: true, speed: 1, opacity_min: 0.1, sync: false } },
            size: { value: 2, random: true },
            links: { enable: true, distance: 150, color: "#c5b358", opacity: 0.2, width: 1 },
            move: { enable: true, speed: 1, direction: "none", random: false, straight: false, out_mode: "out" }
          },
          interactivity: {
            events: {
              onhover: { enable: true, mode: "grab" },
              onclick: { enable: true, mode: "push" },
              resize: true
            },
            modes: {
              grab: { distance: 140, line_opacity: 0.5 },
              push: { particles_nb: 4 }
            }
          },
          detectRetina: true
        });
      }
    } catch (e) {
      console.error("Failed to load tsParticles animation:", e);
    }

    // 3. ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©: Ø§Ø³ØªØ®Ø¯Ø§Ù… Gemini API Ù…Ø¹ Ø¢Ù„ÙŠØ© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…ÙØªØ§Ø­
    const $ = (s, ctx = document) => ctx.querySelector(s);
    const chat = $('#chat');
    const chatBody = $('#chat-body');
    const input = $('#chat-input');
    const form = $('#chat-form');
    const sendButton = $('#send-button');
    const primaryCta = $('#primary-cta');
    const secondaryCta = $('#secondary-cta');
    const navOpenChat = $('#nav-open-chat');
    const minimizeButton = $('#minimize');
    const typingWrap = $('#typing-wrap');
    const moreBtn = $('#more-btn');
    const chatStatus = $('#chat-status');
    
    const apiKeyInput = $('#api-key-input');
    const setKeyButton = $('#set-key-btn');

    // --- Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Gemini API ---
    // Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© ÙØ§Ø±ØºØ©ØŒ ÙˆØ³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„Ù‡Ø§ Ù…Ù† localStorage Ø£Ùˆ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    let apiKey = localStorage.getItem('geminiApiKey') || "AIzaSyB8CaKJqAh25Kw4Be6-PXUxU5DhWzEXC8o";
    const model = "gemini-2.5-flash-preview-09-2025";
    
    // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø´Ø®ØµÙŠØ© (System Instruction)
    const systemPrompt = {
        parts: [{ 
            text: "You are VOXA, a highly creative and professional design assistant. Your primary goal is to help users brainstorm ideas for logos, social media advertisements, visual identity, and branding concepts. Your tone should be supportive, enthusiastic, and insightful. Respond ONLY in modern standard Arabic. Do not mention API configuration, or internal settings." 
        }]
    };

    let chatHistory = [];
    let isChatProcessing = false;

    // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© ---
    
    function updateApiKeyStatus(key) {
        if (key && key.length > 10) {
            apiKey = key;
            localStorage.setItem('geminiApiKey', key);
            apiKeyInput.value = key.substring(0, 4) + '... ' + key.slice(-4); // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¬Ø²Ø¦ÙŠØ§Ù‹
            apiKeyInput.setAttribute('disabled', 'true');
            setKeyButton.textContent = 'ØªÙ… Ø§Ù„Ø­ÙØ¸';
            setKeyButton.classList.add('success');
            setKeyButton.style.background = 'var(--success)';
            chatStatus.textContent = 'Ù…ØªØµÙ„ â€¢ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø°ÙƒÙŠ';
            showToast("ØªÙ… Ø­ÙØ¸ Ù…ÙØªØ§Ø­ API Ø¨Ù†Ø¬Ø§Ø­! ÙŠÙ…ÙƒÙ†Ùƒ Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©.", false);
        } else {
            apiKey = "";
            localStorage.removeItem('geminiApiKey');
            apiKeyInput.value = '';
            apiKeyInput.removeAttribute('disabled');
            setKeyButton.textContent = 'Ø­ÙØ¸';
            setKeyButton.classList.remove('success');
            setKeyButton.style.background = 'var(--primary)';
            chatStatus.textContent = 'ØºÙŠØ± Ù…ØªØµÙ„ â€¢ ÙŠØªØ·Ù„Ø¨ Ù…ÙØªØ§Ø­ API';
            if (chat.classList.contains('is-open')) {
                 showToast("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ Gemini API Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©.", true);
            }
        }
    }

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± "Ø­ÙØ¸"
    setKeyButton.addEventListener('click', () => {
        const key = apiKeyInput.value.trim();
        updateApiKeyStatus(key);
    });

    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ÙØªØ§Ø­ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© (Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø®Ø²Ù†Ø§Ù‹)
    if (apiKey) {
        updateApiKeyStatus(apiKey);
    } else {
        updateApiKeyStatus("");
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ø®Ø§ØµØ© Ù„Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø¨Ø®ØµÙˆØµ Ø§Ù„Ù…ÙØªØ§Ø­
    function initialWelcomeMessage() {
        renderMessage("Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ù‹Ø§! Ø£Ù†Ø§ VOXAØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ… ÙÙŠ ØªØµÙ…ÙŠÙ… Ø´Ø¹Ø§Ø± Ø£Ùˆ Ø¥Ø¹Ù„Ø§Ù† Ø£Ùˆ Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø±ØŸ", 'bot');
        
        if (!apiKey) {
             renderMessage("âš ï¸ **ØªÙ†Ø¨ÙŠÙ‡:** Ø£Ù†Ø§ Ø¬Ø§Ù‡Ø²ØŒ Ù„ÙƒÙ† ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ Gemini API ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø£Ùˆ Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù„ØªÙ„Ù‚ÙŠ Ø±Ø¯ÙˆØ¯ Ø­Ù‚ÙŠÙ‚ÙŠØ©.", 'bot');
        }
        
        // Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØµØ­ÙŠØ­Ø©
        chatHistory = [{ role: "model", parts: [{ text: "Ø£Ù‡Ù„Ø§Ù‹ ÙˆØ³Ù‡Ù„Ù‹Ø§! Ø£Ù†Ø§ VOXAØŒ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ… ÙÙŠ ØªØµÙ…ÙŠÙ… Ø´Ø¹Ø§Ø± Ø£Ùˆ Ø¥Ø¹Ù„Ø§Ù† Ø£Ùˆ Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø±ØŸ" }] }];
    }

    function toggleChat(open) {
        if (open === true) {
            chat.classList.add('is-open');
            chat.setAttribute('aria-hidden', 'false');
            navOpenChat.setAttribute('aria-expanded', 'true');
            input.focus();
            scrollToBottom();
            if (!apiKey) {
                showToast("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ Gemini API ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰.", true);
            }
        } else {
            chat.classList.remove('is-open');
            chat.setAttribute('aria-hidden', 'true');
            navOpenChat.setAttribute('aria-expanded', 'false');
        }
    }

    // Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
    primaryCta.addEventListener('click', () => toggleChat(true));
    secondaryCta.addEventListener('click', () => toggleChat(true));
    navOpenChat.addEventListener('click', () => toggleChat(true));
    minimizeButton.addEventListener('click', () => toggleChat(false));
    
    // Ø±Ø¨Ø· Ø²Ø± "ØªØ¹Ø±Ù‘Ù Ø£ÙƒØ«Ø±"
    moreBtn.addEventListener('click', () => {
        // ÙŠÙ…ÙƒÙ†Ùƒ ØªÙˆØ¬ÙŠÙ‡ Ù‡Ø°Ø§ Ø§Ù„Ø²Ø± Ù„Ø£Ø³ÙÙ„ Ø§Ù„ØµÙØ­Ø© Ù„Ù€ #services Ø£Ùˆ Ø£ÙŠ Ù‚Ø³Ù… Ø¢Ø®Ø±
        document.getElementById('services').scrollIntoView({ behavior: 'smooth' });
    });


    function scrollToBottom() {
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    function showToast(message, isError = false) {
        const toast = $('#toast');
        const icon = $('#toast i');
        $('#toast span').textContent = message;
        
        toast.classList.remove('show', 'error');
        if (isError) {
            toast.classList.add('error');
            icon.className = 'fa-solid fa-exclamation-circle';
        } else {
            icon.className = 'fa-solid fa-check-circle';
        }
        
        // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù€ Toast Ø¨Ø¹Ø¯ ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø±ÙƒØ©
        setTimeout(() => toast.classList.add('show'), 50);
        setTimeout(() => toast.classList.remove('show'), 4000);
    }

    // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ---

    function renderMessage(content, role) {
        const msgDiv = document.createElement('div');
        msgDiv.className = `msg ${role}`;
        msgDiv.textContent = content; // Ø§Ø³ØªØ®Ø¯Ø§Ù… textContent Ù„ØªØ¬Ù†Ø¨ Ø­Ù‚Ù† HTML
        chatBody.insertBefore(msgDiv, typingWrap);
        scrollToBottom();
    }
    
    function showTyping(show) {
        if (show) {
            typingWrap.style.display = 'block';
            scrollToBottom();
            isChatProcessing = true;
            input.disabled = true;
            sendButton.disabled = true;
        } else {
            typingWrap.style.display = 'none';
            isChatProcessing = false;
            input.disabled = false;
            sendButton.disabled = false;
            input.focus();
        }
    }

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const userMessage = input.value.trim();
        if (!userMessage || isChatProcessing) return;

        // 1. Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ø¬Ù„
        renderMessage(userMessage, 'user');
        chatHistory.push({ role: "user", parts: [{ text: userMessage }] });
        input.value = '';

        // 2. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…ÙØªØ§Ø­ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù„Ø§ ØªØ°Ù‡Ø¨ Ù„Ù€ API
        if (!apiKey) {
            showTyping(false);
            renderMessage("Ø¹Ø°Ø±Ù‹Ø§ØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø§Ù„Ø¢Ù†. ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ Gemini API ÙÙŠ Ø­Ù‚Ù„ 'Ø£Ø¯Ø®Ù„ Ù…ÙØªØ§Ø­ Gemini API' ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ.", 'bot');
            showToast("ÙŠØªØ·Ù„Ø¨ Ù…ÙØªØ§Ø­ API Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©.", true);
            return;
        }

        // 3. Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
        showTyping(true);

        // 4. Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API
        await sendMessage();
    });
    
    async function sendMessage() {
        const apiUrlWithKey = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`;

        const payload = {
            contents: chatHistory,
            systemInstruction: systemPrompt,
        };

        let attempt = 0;
        const maxRetries = 3;
        
        while (attempt < maxRetries) {
            try {
                const response = await fetch(apiUrlWithKey, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø®Ø·Ø£ 400 Ø£Ùˆ 401ØŒ ÙÙ…Ù† Ø§Ù„Ù…Ø­ØªÙ…Ù„ Ø£Ù† Ø§Ù„Ù…ÙØªØ§Ø­ ØºÙŠØ± ØµØ§Ù„Ø­
                    if (response.status === 400 || response.status === 401) {
                         throw new Error("Invalid API Key or Bad Request.");
                    }
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;

                if (text) {
                    // 5. Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø¨ÙˆØª ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ø¬Ù„
                    chatHistory.push({ role: "model", parts: [{ text: text }] });
                    renderMessage(text, 'bot');
                } else {
                    renderMessage("Ø¹Ø°Ø±Ù‹Ø§ØŒ Ù„Ù… Ø£ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø¬Ø§Ø¨Ø© ÙˆØ§Ø¶Ø­Ø©. Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ØºÙŠØ± Ù…Ù†Ø§Ø³Ø¨ Ø£Ùˆ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø¯Ø§Ø®Ù„ÙŠ. (Gemini response empty)", 'bot');
                }

                // 6. Ø¥Ø®ÙØ§Ø¡ Ù…Ø¤Ø´Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø©
                showTyping(false);
                return;

            } catch (error) {
                console.error(`Gemini API Attempt ${attempt + 1} failed:`, error);
                
                if (error.message.includes("Invalid API Key")) {
                    showTyping(false);
                    renderMessage("âŒ **Ø®Ø·Ø£:** ÙŠØ¨Ø¯Ùˆ Ø£Ù† Ù…ÙØªØ§Ø­ Gemini API ØºÙŠØ± ØµØ­ÙŠØ­. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„ØµØ­ÙŠØ­ ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ.", 'bot');
                    updateApiKeyStatus(""); // Ù…Ø³Ø­ Ø§Ù„Ù…ÙØªØ§Ø­ ØºÙŠØ± Ø§Ù„ØµØ§Ù„Ø­
                    return; // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
                }
                
                attempt++;
                if (attempt < maxRetries) {
                    const delay = Math.pow(2, attempt) * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
        }
        
        // 7. Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£ Ø¨Ø¹Ø¯ ÙØ´Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª
        showTyping(false);
        renderMessage("Ø¹Ø°Ø±Ù‹Ø§ØŒ ÙˆØ§Ø¬Ù‡Øª Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø´Ø¨ÙƒØ© Ø¨Ø¹Ø¯ Ø¹Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø§Øª. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.", 'bot');
        showToast("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…ÙØªØ§Ø­ API ÙˆØ§Ù„Ø§ØªØµØ§Ù„.", true);
    }
    
    // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø´Ø§Øª
    initialWelcomeMessage();
  </script>
</body>
</html>
